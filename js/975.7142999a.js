"use strict";(self["webpackChunkgrowth_js"]=self["webpackChunkgrowth_js"]||[]).push([[975],{9975:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Xe});var l=a(1758),r=a(8790),o=a(9104);function n(e,t,a,n,i,s){const d=(0,l.g2)("q-card-section"),u=(0,l.g2)("q-card"),c=(0,l.g2)("user-input-form"),p=(0,l.g2)("q-separator"),h=(0,l.g2)("q-btn"),m=(0,l.g2)("q-btn-group"),g=(0,l.g2)("q-card-actions"),b=(0,l.g2)("q-avatar"),v=(0,l.g2)("q-tab"),f=(0,l.g2)("q-tabs"),w=(0,l.g2)("growth-chart"),k=(0,l.g2)("q-tab-panel"),y=(0,l.g2)("q-tab-panels"),F=(0,l.g2)("q-splitter"),R=(0,l.g2)("export-dialog"),D=(0,l.g2)("import-dialog"),x=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(x,{class:"q-pa-md"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{modelValue:e.splitterModel,"onUpdate:modelValue":t[6]||(t[6]=t=>e.splitterModel=t),horizontal:e.$q.screen.lt.md,limits:[30,80],class:"q-mb-md","separator-class":{"q-mx-md":e.$q.screen.gt.sm,"q-my-md":e.$q.screen.lt.md}},{before:(0,l.k6)((()=>[(0,l.bF)(u,{bordered:"",class:"q-mb-md"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{class:"description q-pb-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("strong",null,(0,r.v_)(e.t("description.label")),1),(0,l.eW)(": "),(0,l.Lk)("p",null,(0,r.v_)(e.t("description.text")),1)])),_:1}),(0,l.bF)(d,{class:"data-privacy q-pt-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("strong",null,(0,r.v_)(e.t("dataPrivacy.label")),1),(0,l.eW)(": "),(0,l.Lk)("p",null,(0,r.v_)(e.t("dataPrivacy.text")),1)])),_:1})])),_:1}),(0,l.bF)(u,{bordered:"",class:"scroll"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:e.userInput,"onUpdate:modelValue":t[0]||(t[0]=t=>e.userInput=t),"available-references":e.availableReferences,"bmi-reference-data":e.bmiReferenceData,"height-reference-data":e.heightReferenceData,"weight-reference-data":e.weightReferenceData,"onUpdate:reference":t[1]||(t[1]=t=>e.loadReference(t))},null,8,["modelValue","available-references","bmi-reference-data","height-reference-data","weight-reference-data"]),(0,l.bF)(p),(0,l.bF)(g,{class:"justify-center"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{rounded:"",push:""},{default:(0,l.k6)((()=>[(0,l.bF)(h,{color:"primary",icon:"save",label:e.t("export.title"),onClick:t[2]||(t[2]=t=>e.showExportDialog=!0)},null,8,["label"]),(0,l.bF)(h,{color:"primary",icon:"file_download",label:e.t("import.title"),onClick:t[3]||(t[3]=t=>e.showImportDialog=!0)},null,8,["label"]),(0,l.bF)(h,{color:"red",icon:"restart_alt",label:e.t("reset"),onClick:e.resetUserInput},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1})])),separator:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(b,{color:"primary","text-color":"white",size:"30px",icon:"drag_indicator"},null,512),[[o.aG,e.$q.screen.gt.sm]])])),after:(0,l.k6)((()=>[(0,l.bF)(u,{bordered:""},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.chartTab,"onUpdate:modelValue":t[4]||(t[4]=t=>e.chartTab=t),dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,l.k6)((()=>[(0,l.bF)(v,{name:"height",label:e.t("height")},null,8,["label"]),(0,l.bF)(v,{name:"weight",label:e.t("weight")},null,8,["label"]),(0,l.bF)(v,{name:"bmi",label:e.t("bmi")},null,8,["label"])])),_:1},8,["modelValue"]),(0,l.bF)(p),(0,l.bF)(y,{modelValue:e.chartTab,"onUpdate:modelValue":t[5]||(t[5]=t=>e.chartTab=t),animated:""},{default:(0,l.k6)((()=>[(0,l.bF)(k,{name:"height"},{default:(0,l.k6)((()=>[(0,l.bF)(w,{"property-name":e.t("height")+" (cm)","scatter-data":e.heightData,color:e.chartColor,"centile-data":e.heightReferenceData,"target-sds":e.targetHeightSds},null,8,["property-name","scatter-data","color","centile-data","target-sds"])])),_:1}),(0,l.bF)(k,{name:"weight"},{default:(0,l.k6)((()=>[(0,l.bF)(w,{"property-name":e.t("weight")+" (kg)","scatter-data":e.weightData,color:e.chartColor,"centile-data":e.weightReferenceData},null,8,["property-name","scatter-data","color","centile-data"])])),_:1}),(0,l.bF)(k,{name:"bmi"},{default:(0,l.k6)((()=>[(0,l.bF)(w,{"property-name":e.t("bmi")+" (kg/mÂ²)","scatter-data":e.bmiData,color:e.chartColor,"centile-data":e.bmiReferenceData},null,8,["property-name","scatter-data","color","centile-data"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","horizontal","separator-class"]),(0,l.bF)(R,{show:e.showExportDialog,"onUpdate:show":t[7]||(t[7]=t=>e.showExportDialog=t),userInput:e.userInput,"bmi-reference-data":e.bmiReferenceData,"height-reference-data":e.heightReferenceData,"weight-reference-data":e.weightReferenceData},null,8,["show","userInput","bmi-reference-data","height-reference-data","weight-reference-data"]),(0,l.bF)(D,{show:e.showImportDialog,"onUpdate:show":t[8]||(t[8]=t=>e.showImportDialog=t),userInput:e.userInput,"onUpdate:userInput":t[9]||(t[9]=t=>e.userInput=t)},null,8,["show","userInput"])])),_:1})}var i=a(8734);function s(e,t,a,r,o,n){const i=(0,l.g2)("ScatterChart");return e.mounted?((0,l.uX)(),(0,l.Wv)(i,{key:0,chartData:e.chartData,options:e.options},null,8,["chartData","options"])):(0,l.Q3)("",!0)}var d=a(1766),u=a(3679),c=a(4886),p=a(3537);function h(){const e=(e,t,a,l,r)=>a+(r-a)*(e-t)/(l-t),t=(e,t)=>{let a=0,l=e.length;while(a<l){const r=Math.floor((l-a)/2+a);t>e[r]?a=r+1:l=r}return a},a=(a,l)=>{let r,o;const n=t(a.map((e=>e.age)),l);return n>=a.length?a[-1]:0===n?a[0]:a[n].age===l?a[n]:(a[n].age>l&&(r=a[n-1],o=a[n]),r&&o?{age:l,l:e(l,r.age,r.l,o.age,o.l),m:e(l,r.age,r.m,o.age,o.m),s:e(l,r.age,r.s,o.age,o.s)}:r)},l=(e,t,a,l)=>Math.abs(t)<1e-5?Math.exp(l*e)*a:(e*t*l+1)**(1/t)*a,r=(e,t,a,l)=>Math.abs(t)<1e-5?Math.log(e/a)/l:(Math.pow(e/a,t)-1)/(t*l),o=(e,t,l)=>{const o=a(e,t);return o?r(l,o.l,o.m,o.s):void 0},n=(e,t,a)=>(e+t)/2+("male"==a?6.5:-6.5);return{rawFromLms:l,rawFromReference(e,t,r){const o=a(e,t);return o?l(r,o.l,o.m,o.s):void 0},sdsFromLms:r,sdsFromReference:o,targetHeight:n,targetHeightSds(e,t,a,l){return o(e,18,n(t,a,l))},sds:(e,t,a)=>{if(e&&void 0!=t&&a)return o(e,t,a)},age:(e,t)=>{if(e&&t)return(new Date(t).getTime()-new Date(e).getTime())/306072e5},bmi:(e,t)=>{if(e&&t)return t/(e/100)**2}}}u.t1.register(...u.$L,c.Ay);const m=(0,l.pM)({components:{ScatterChart:d.tR},props:{scatterData:{type:Array,default:()=>{}},centileData:{type:Array,default:()=>{}},targetSds:Number,options:{type:Object,default:()=>({responsive:!0,scales:{x:{min:0,max:18},y:{min:0}},plugins:{zoom:{limits:{x:{min:0,max:25,minRange:1},y:{min:0,max:300,minRange:5}},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0,mode:"xy"}}}})},color:{type:String,default:"black"},targetColor:{type:String,default:"#3d9970"},propertyName:String},setup(e){const{t}=(0,p.s9)(),{rawFromLms:a}=h(),r=(0,i.KR)(!1),o=(0,l.EW)((()=>{var t={};if(e.centileData)for(var a of["p03","p50","p97"])t[a]=e.centileData.map((e=>({x:e.age,y:e[a]})));return t})),n=(0,l.EW)((()=>e.targetSds&&e.centileData?e.centileData.map((t=>({x:t.age,y:a(e.targetSds,t.l,t.m,t.s)}))):[]));return(0,l.sV)((()=>r.value=!0)),{mounted:r,chartData:(0,l.EW)((()=>({datasets:[{label:e.propertyName,type:"scatter",data:e.scatterData,backgroundColor:e.color},{label:t("parentalEstimatedValue"),type:"line",data:n.value,borderColor:e.targetColor,borderWidth:2,pointHitRadius:0,pointRadius:0},{label:"p03",type:"line",data:o.value.p03,borderColor:"black",borderWidth:2,pointHitRadius:0,pointRadius:0},{label:"p50",type:"line",borderDash:[5],data:o.value.p50,borderColor:"black",borderWidth:2,pointHitRadius:0,pointRadius:0},{label:"p97",type:"line",data:o.value.p97,borderColor:"black",borderWidth:2,pointHitRadius:0,pointRadius:0}],options:{elements:{line:{fill:!1}}}})))}}});var g=a(2807);const b=(0,g.A)(m,[["render",s]]),v=b,f={class:"row"},w={class:"col-12 col-md"},k={key:0,class:"text-caption"},y=["href"],F={class:"col-12 col-md q-gutter-md text-center q-pt-sm"},R={class:"col-12 col-md"},D={class:"row items-center q-gutter-md"},x={class:"col-12 col-md"},_=["title"],V=(0,l.Lk)("th",null,null,-1),q={class:"q-tr--no-hover"},A={colspan:"5"};function C(e,t,a,n,i,s){const d=(0,l.g2)("q-select"),u=(0,l.g2)("q-radio"),c=(0,l.g2)("q-input"),p=(0,l.g2)("q-btn"),h=(0,l.g2)("q-icon"),m=(0,l.g2)("q-slide-transition"),g=(0,l.g2)("q-card-section"),b=(0,l.g2)("q-separator"),v=(0,l.g2)("visit-row"),C=(0,l.g2)("q-markup-table"),S=(0,l.gN)("t");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",f,[(0,l.Lk)("div",w,[(0,l.bF)(d,{modelValue:e.local.reference,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.local.reference=t),t[1]||(t[1]=t=>e.$emit("update:reference",t))],outlined:"",label:e.t("selectReference"),"emit-value":"","map-options":"",options:e.availableReferences},null,8,["modelValue","label","options"]),e.selectedReference&&e.selectedReference.url?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.eW)((0,r.v_)(e.t("source"))+": ",1),(0,l.Lk)("a",{href:e.selectedReference.url,target:"_blank",class:"q-link text-primary"},(0,r.v_)(e.selectedReference.authors?e.selectedReference.authors:e.selectedReference.url),9,y)])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",F,[(0,l.bF)(u,{modelValue:e.local.sex,"onUpdate:modelValue":t[2]||(t[2]=t=>e.local.sex=t),val:"male",label:e.t("male")},null,8,["modelValue","label"]),(0,l.bF)(u,{modelValue:e.local.sex,"onUpdate:modelValue":t[3]||(t[3]=t=>e.local.sex=t),val:"female",label:e.t("female")},null,8,["modelValue","label"])]),(0,l.Lk)("div",R,[(0,l.bF)(c,{outlined:"",type:"date",label:e.t("birthdate"),"stack-label":"",debounce:"500",modelValue:e.local.birthdate,"onUpdate:modelValue":t[4]||(t[4]=t=>e.local.birthdate=t)},null,8,["label","modelValue"]),e.selectedReference&&e.selectedReference.url?((0,l.uX)(),(0,l.Wv)(p,{key:0,flat:"",dense:"","no-caps":"",icon:e.expanded?"keyboard_arrow_up":"keyboard_arrow_down",label:e.expanded?e.t("collapse"):e.t("expand"),class:"text-caption float-right",onClick:t[5]||(t[5]=t=>e.expanded=!e.expanded)},null,8,["icon","label"])):(0,l.Q3)("",!0)])]),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("div",D,[(0,l.bF)(c,{modelValue:e.local.motherHeight,"onUpdate:modelValue":t[6]||(t[6]=t=>e.local.motherHeight=t),modelModifiers:{number:!0},type:"number",class:"col-12 col-md",outlined:"","stack-label":"",debounce:"500",label:e.t("motherHeight")},null,8,["modelValue","label"]),(0,l.bF)(c,{modelValue:e.local.fatherHeight,"onUpdate:modelValue":t[7]||(t[7]=t=>e.local.fatherHeight=t),modelModifiers:{number:!0},type:"number",class:"col-12 col-md",outlined:"","stack-label":"",debounce:"500",label:e.t("fatherHeight")},null,8,["modelValue","label"]),(0,l.Lk)("div",x,[(0,l.bo)((0,l.Lk)("span",{title:e.t("targetHeightDescription")},[(0,l.eW)((0,r.v_)(e.t("targetHeight"))+": "+(0,r.v_)(e.targetHeight)+" cm ",1),(0,l.bF)(h,{name:"info"})],8,_),[[o.aG,!!e.targetHeight]])])],512),[[o.aG,e.expanded]])])),_:1})])),_:1}),(0,l.bF)(b),(0,l.bF)(g,{class:"q-pa-none"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{flat:""},{default:(0,l.k6)((()=>[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.bo)((0,l.Lk)("th",null,null,512),[[S,"date"]]),(0,l.Lk)("th",null,(0,r.v_)(e.t("height")+" (cm)"),1),(0,l.Lk)("th",null,(0,r.v_)(e.t("weight")+" (kg)"),1),(0,l.Lk)("th",null,(0,r.v_)(e.t("bmi")+" (kg/mÂ²)"),1),V])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.local.visits,((t,a)=>((0,l.uX)(),(0,l.Wv)(v,{key:a,modelValue:e.local.visits[a],"onUpdate:modelValue":t=>e.local.visits[a]=t,birthdate:e.local.birthdate,"bmi-reference-data":e.bmiReferenceData,"height-reference-data":e.heightReferenceData,"weight-reference-data":e.weightReferenceData,onDeleteRow:a=>e.removeVisit(t)},null,8,["modelValue","onUpdate:modelValue","birthdate","bmi-reference-data","height-reference-data","weight-reference-data","onDeleteRow"])))),128)),(0,l.Lk)("tr",q,[(0,l.Lk)("td",A,[(0,l.bF)(p,{rounded:"",color:"secondary",icon:"add",label:e.t("addRow"),onClick:e.addVisit},null,8,["label","onClick"])])])])])),_:1})])),_:1})])}const S={class:"q-tr--no-hover"},Q=["title"],I=["title"],L=["title"];function E(e,t,a,o,n,i){const s=(0,l.g2)("q-input"),d=(0,l.g2)("q-btn");return(0,l.uX)(),(0,l.CE)("tr",S,[(0,l.Lk)("td",null,[(0,l.bF)(s,{outlined:"",type:"date",debounce:"500",modelValue:e.modelValue.date,title:void 0===e.age?void 0:e.t("year",Math.round(10*e.age)/10),"onUpdate:modelValue":t[0]||(t[0]=t=>e.update("date",t))},null,8,["modelValue","title"])]),(0,l.Lk)("td",null,[(0,l.bF)(s,{outlined:"",type:"number",step:"any",min:"0",title:"cm",debounce:"500","model-value":e.modelValue.height,"onUpdate:modelValue":t[1]||(t[1]=t=>e.update("height",t))},{append:(0,l.k6)((()=>[e.heightSds?((0,l.uX)(),(0,l.CE)("div",{key:0,title:e.t("sdsDescription"),class:(0,r.C4)(["text-subtitle2",e.sdsClass(e.heightSds)])},(0,r.v_)(e.heightSds.toFixed(2))+" SDS ",11,Q)):(0,l.Q3)("",!0)])),_:1},8,["model-value"])]),(0,l.Lk)("td",null,[(0,l.bF)(s,{outlined:"",type:"number",step:"any",min:"0",title:"kg",debounce:"500","model-value":e.modelValue.weight,"onUpdate:modelValue":t[2]||(t[2]=t=>e.update("weight",t))},{append:(0,l.k6)((()=>[e.weightSds?((0,l.uX)(),(0,l.CE)("div",{key:0,title:e.t("sdsDescription"),class:(0,r.C4)(["text-subtitle2",e.sdsClass(e.weightSds)])},(0,r.v_)(e.weightSds.toFixed(2))+" SDS ",11,I)):(0,l.Q3)("",!0)])),_:1},8,["model-value"])]),(0,l.Lk)("td",null,[(0,l.bF)(s,{outlined:"",readonly:"",class:"cursor-inherit",type:"number",step:"any",title:"kg/mÂ²","model-value":e.bmi},{append:(0,l.k6)((()=>[e.bmiSds?((0,l.uX)(),(0,l.CE)("div",{key:0,title:e.t("sdsDescription"),class:(0,r.C4)(["text-subtitle2",e.sdsClass(e.bmiSds)])},(0,r.v_)(e.bmiSds.toFixed(2))+" SDS ",11,L)):(0,l.Q3)("",!0)])),_:1},8,["model-value"])]),(0,l.Lk)("td",null,[(0,l.bF)(d,{round:"",color:"red",icon:"clear",title:e.t("deleteRow"),onClick:t[3]||(t[3]=t=>e.$emit("deleteRow"))},null,8,["title"])])])}const H=(0,l.pM)({props:{modelValue:{type:Object,default:()=>{}},birthdate:String,bmiReferenceData:Array,heightReferenceData:Array,weightReferenceData:Array},emits:["update:modelValue","deleteRow"],setup(e,{emit:t}){const{t:a}=(0,p.s9)(),{sds:r,age:o,bmi:n}=h(),i=(0,l.EW)((()=>o(e.birthdate,e.modelValue.date))),s=(0,l.EW)((()=>n(e.modelValue.height,e.modelValue.weight)));return{t:a,age:i,bmi:(0,l.EW)((()=>{if(s.value)return s.value.toFixed(2)})),bmiSds:(0,l.EW)((()=>r(e.bmiReferenceData,i.value,s.value))),heightSds:(0,l.EW)((()=>r(e.heightReferenceData,i.value,e.modelValue.height))),weightSds:(0,l.EW)((()=>r(e.weightReferenceData,i.value,e.modelValue.weight))),update(a,l){t("update:modelValue",{...e.modelValue,[a]:l})},sdsClass(e){return Math.abs(e)>=1.881?"text-negative":Math.abs(e)>=1.644?"text-warning":"text-positive"}}}});var W=a(1239),j=a(8926),U=a(7954),T=a(8582),M=a.n(T);const N=(0,g.A)(H,[["render",E],["__scopeId","data-v-3a6350f0"]]),O=N;M()(H,"components",{QTr:W.A,QInput:j.A,QBtn:U.A});var K=a(2150),X=a(9375);const B=(0,K.nY)("reference",(()=>{const{t:e}=(0,p.s9)(),{rawFromReference:t,sdsFromReference:a}=h(),r=(0,i.KR)(),o=(0,i.KR)(),n=(0,l.EW)((()=>[{value:"normal_german",label:e("normal_german"),authors:"Kromeyer-Hauschild et al. 2001",url:"https://doi.org/10.1007/s001120170107",disease:!1},{value:"normal_china",label:e("normal_china"),authors:"Zong et al. 2013",url:"https://doi.org/10.1371/journal.pone.0059569",disease:!1},{value:"normal_who",label:e("normal_who"),authors:"WHO",url:"https://doi.org/10.2471/blt.07.043497",disease:!1},{value:"normal_turkish_germany",label:e("normal_turkish_germany"),authors:"Redlefsen 2008",url:"https://d-nb.info/990166104/34",disease:!1},{value:"achondroplasia_sweden",label:e("achondroplasia_sweden"),authors:"Merker et al. 2019",url:"https://doi.org/10.1002/ajmg.a.38853",disease:!0},{value:"hypochondroplasia_argentinia",label:e("hypochondroplasia_argentinia"),authors:"Arenas et al. 2018",url:"https://doi.org/10.1515/jpem-2018-0046",disease:!0},{value:"noonan_japan",label:e("noonan_japan"),authors:"Isojima et al. 2016",url:"https://doi.org/10.1038/pr.2015.254",disease:!0},{value:"trisomy21_america",label:e("trisomy21_america"),authors:"Zemel et al. 2015",url:"https://doi.org/10.1542/peds.2015-1652",disease:!0}])),s=()=>{r.value=void 0,o.value=void 0},d=(e,t,l=.72)=>{if(r.value?.disease||!o.value?.height)return;const n=a(o.value.height.male||[],18,e),i=a(o.value.height.female||[],18,t);return n&&i?(n+i)/2*l:void 0};return{reference:r,availableReferences:n,async loadReference(e){if(e)return await X.api.get(`./references/${e}.json`).then((t=>{r.value=n.value.find((t=>t.value===e)),o.value=t.data})).catch((()=>s()));s()},getReferenceData(e,t){if(!o.value)return[];const a=o.value[e];return a?a[t]:[]},getTargetHeight(e,a,l,r=.72){if(!o.value?.height||!o.value?.height[l])return;const n=d(e,a,r);return n?t(o.value?.height[l],18,n):void 0},getTargetHeightSds:d}})),$=(0,l.pM)({props:{modelValue:{type:Object,default:()=>{}},availableReferences:{type:Array,default:()=>[]},bmiReferenceData:Array,heightReferenceData:Array,weightReferenceData:Array},components:{VisitRow:O},emits:["update:reference"],setup(e){const{t}=(0,p.s9)(),a=B(),r=(0,l.EW)((()=>e.modelValue)),o=(0,i.KR)(!1);return(0,l.wB)((()=>r.value.motherHeight),(e=>o.value=o.value||!!e)),(0,l.wB)((()=>r.value.fatherHeight),(e=>o.value=o.value||!!e)),{t,local:r,expanded:o,selectedReference:(0,l.EW)((()=>e.availableReferences.find((e=>e.value==r.value.reference)))),addVisit(){r.value.visits||(r.value.visits=[]),r.value.visits.push({})},removeVisit(e){r.value.visits?.splice(r.value.visits?.indexOf(e),1)},targetHeight:(0,l.EW)((()=>{if(r.value.motherHeight&&r.value.fatherHeight&&r.value.sex)return a.getTargetHeight(r.value.motherHeight,r.value.fatherHeight,r.value.sex)?.toFixed(1)}))}}});var J=a(7066),P=a(6469),z=a(6737),G=a(306),Z=a(4609),Y=a(7015),ee=a(9774);const te=(0,g.A)($,[["render",C]]),ae=te;M()($,"components",{QCardSection:J.A,QSelect:P.A,QRadio:z.A,QInput:j.A,QBtn:U.A,QSlideTransition:G.A,QIcon:Z.A,QSeparator:Y.A,QMarkupTable:ee.A,QTr:W.A});const le={class:"text-h6"},re={class:"row justify-between items-center"},oe={class:"col-7"},ne={class:"row justify-between items-center"},ie={class:"col-7"},se={class:"row justify-between items-center"},de={class:"col-7"};function ue(e,t,a,r,o,n){const i=(0,l.g2)("q-space"),s=(0,l.g2)("q-btn"),d=(0,l.g2)("q-card-section"),u=(0,l.g2)("q-separator"),c=(0,l.g2)("q-card"),p=(0,l.g2)("qr-code-dialog"),h=(0,l.g2)("q-dialog"),m=(0,l.gN)("t"),g=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(h,{"model-value":e.show,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:show",t))},{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{class:"row items-center q-pb-none"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("div",le,null,512),[[m,"export.title"]]),(0,l.bF)(i),(0,l.bo)((0,l.bF)(s,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,l.bF)(u,{inset:""}),(0,l.bF)(d,{class:"q-gutter-sm"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("p",null,null,512),[[m,"export.description"]]),(0,l.Lk)("div",re,[(0,l.bF)(s,{rounded:"",stack:"",class:"col-4",color:"primary",icon:"save",label:e.t("export.browser.title"),onClick:e.saveUserInput},null,8,["label","onClick"]),(0,l.bo)((0,l.Lk)("div",oe,null,512),[[m,"export.browser.description"]])]),(0,l.Lk)("div",ne,[(0,l.bF)(s,{rounded:"",stack:"",class:"col-4",color:"primary",icon:"download",label:e.t("export.file.title"),onClick:e.doFileExport},null,8,["label","onClick"]),(0,l.bo)((0,l.Lk)("div",ie,null,512),[[m,"export.file.description"]])]),(0,l.Lk)("div",se,[(0,l.bF)(s,{rounded:"",stack:"",class:"col-4",color:"primary",icon:"qr_code_2",label:e.t("export.qrCode.title"),onClick:t[0]||(t[0]=t=>e.showQrCode=!0)},null,8,["label"]),(0,l.bo)((0,l.Lk)("div",de,null,512),[[m,"export.qrCode.description"]])])])),_:1})])),_:1}),(0,l.bF)(p,{modelValue:e.showQrCode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showQrCode=t),content:e.userInput},null,8,["modelValue","content"])])),_:1},8,["model-value"])}const ce={class:"text-h6"};function pe(e,t,a,r,o,n){const i=(0,l.g2)("q-space"),s=(0,l.g2)("q-btn"),d=(0,l.g2)("q-card-section"),u=(0,l.g2)("q-separator"),c=(0,l.g2)("qrcode-vue"),p=(0,l.g2)("q-card"),h=(0,l.g2)("q-dialog"),m=(0,l.gN)("t"),g=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(h,{"model-value":e.local,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:modelValue",t))},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{class:"row items-center q-pb-none"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("div",ce,null,512),[[m,"export.qrCode.title"]]),(0,l.bF)(i),(0,l.bo)((0,l.bF)(s,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,l.bF)(u,{inset:""}),(0,l.bF)(d,{class:"text-center"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("p",null,null,512),[[m,"export.qrCode.description2"]]),(0,l.bF)(c,{value:JSON.stringify(e.content),size:e.size,level:"H"},null,8,["value","size"])])),_:1})])),_:1})])),_:1},8,["model-value"])}var he=a(4867);const me=(0,l.pM)({components:{QrcodeVue:he.A},props:{modelValue:{type:Boolean,default:!1},content:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(e){return{local:(0,l.EW)((()=>e.modelValue)),size:(0,l.EW)((()=>e.content.visits?100*Math.sqrt(e.content.visits.length||1):0))}}});var ge=a(3228),be=a(7569),ve=a(1173),fe=a(2769);const we=(0,g.A)(me,[["render",pe]]),ke=we;M()(me,"components",{QDialog:ge.A,QCard:be.A,QCardSection:J.A,QSpace:ve.A,QBtn:U.A,QSeparator:Y.A}),M()(me,"directives",{ClosePopup:fe.A});a(3825),a(9888),a(3190),a(6307),a(4066),a(7053),a(2701),a(7396),a(923),a(9502);function ye(){return{saveToFile:function(e,t){var a=e,l=new Blob([a],{type:"text/plain"}),r=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=t,o.href=window.URL.createObjectURL(l),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),r.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(r)}}}const Fe=(0,l.pM)({components:{QrCodeDialog:ke},props:{show:{type:Boolean,default:!1},userInput:{type:Object,default:()=>{}},bmiReferenceData:Array,heightReferenceData:Array,weightReferenceData:Array},emits:["update:show"],setup(e){const{t}=(0,p.s9)(),a=(0,i.KR)(!1),{sds:r,age:o,bmi:n}=h(),s=(0,l.EW)((()=>"data_"+(new Date).toLocaleDateString()+".json")),{saveToFile:d}=ye();return{t,showQrCode:a,exportFileName:s,saveUserInput(){localStorage.setItem("userInput",JSON.stringify(e.userInput))},doFileExport(){const t=e.userInput.visits.map((t=>{const a=o(e.userInput.birthdate,t.date),l=n(t.height,t.weight);return{date:t.date,age:a,height:t.height?+t.height:void 0,heightSds:r(e.heightReferenceData,a,t.height),weight:t.weight?+t.weight:void 0,weightSds:r(e.weightReferenceData,a,t.weight),bmi:l,bmiSds:r(e.bmiReferenceData,a,l)}})),a={birthdate:e.userInput.birthdate,motherHeight:e.userInput.motherHeight,fatherHeight:e.userInput.fatherHeight,sex:e.userInput.sex,reference:e.userInput.reference,visits:t};d(JSON.stringify(a),s.value)}}}}),Re=(0,g.A)(Fe,[["render",ue]]),De=Re;M()(Fe,"components",{QDialog:ge.A,QCard:be.A,QCardSection:J.A,QSpace:ve.A,QBtn:U.A,QSeparator:Y.A}),M()(Fe,"directives",{ClosePopup:fe.A});const xe={class:"text-h6"},_e={class:"row justify-between items-center"},Ve={class:"row justify-between items-center"};function qe(e,t,a,r,o,n){const i=(0,l.g2)("q-space"),s=(0,l.g2)("q-btn"),d=(0,l.g2)("q-card-section"),u=(0,l.g2)("q-separator"),c=(0,l.g2)("q-icon"),p=(0,l.g2)("q-file"),h=(0,l.g2)("q-input"),m=(0,l.g2)("q-card"),g=(0,l.g2)("q-dialog"),b=(0,l.gN)("t"),v=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(g,{modelValue:e.show,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:show",t))},{default:(0,l.k6)((()=>[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{class:"row items-center q-pb-none"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("div",xe,null,512),[[b,"import.title"]]),(0,l.bF)(i),(0,l.bo)((0,l.bF)(s,{icon:"close",flat:"",round:"",dense:""},null,512),[[v]])])),_:1}),(0,l.bF)(u,{inset:""}),(0,l.bF)(d,{class:"q-gutter-sm"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("p",null,null,512),[[b,"import.description"]]),(0,l.Lk)("div",_e,[(0,l.bF)(p,{modelValue:e.jsonFile,"onUpdate:modelValue":t[0]||(t[0]=t=>e.jsonFile=t),outlined:"",label:e.t("import.file.label"),class:"col-7",accept:".json"},{prepend:(0,l.k6)((()=>[(0,l.bF)(c,{name:"attach_file"})])),_:1},8,["modelValue","label"]),(0,l.bF)(s,{rounded:"",stack:"",color:"primary",icon:"sync",class:"col-4",disabled:!e.jsonFile,label:e.t("import.file.title"),onClick:e.importJsonFile},null,8,["disabled","label","onClick"])]),(0,l.Lk)("div",Ve,[(0,l.bF)(h,{outlined:"",type:"textarea",modelValue:e.jsonString,"onUpdate:modelValue":t[1]||(t[1]=t=>e.jsonString=t),label:e.t("import.json.label"),class:"col-7",rows:"1"},null,8,["modelValue","label"]),(0,l.bF)(s,{rounded:"",stack:"",color:"primary",icon:"sync",class:"col-4",disabled:!e.jsonString,label:e.t("import.json.title"),onClick:e.importJsonString},null,8,["disabled","label","onClick"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])}const Ae=(0,l.pM)({props:{show:{type:Boolean,default:!1},userInput:{type:Object,default:()=>{}}},emits:["update:userInput","update:show"],setup(e,{emit:t}){const{t:a}=(0,p.s9)(),l=(0,i.KR)(void 0),r=(0,i.KR)(void 0),o=new FileReader;return o.onload=e=>{e.target&&t("update:userInput",JSON.parse(e.target.result))},{t:a,fileReader:o,jsonString:l,jsonFile:r,importJsonString(){try{l.value&&t("update:userInput",JSON.parse(l.value)),l.value=void 0,t("update:show",!1)}catch(e){console.log(e)}},importJsonFile(){try{r.value&&o.readAsText(r.value),r.value=void 0,t("update:show",!1)}catch(e){console.log(e)}}}}});var Ce=a(8433);const Se=(0,g.A)(Ae,[["render",qe]]),Qe=Se;M()(Ae,"components",{QDialog:ge.A,QCard:be.A,QCardSection:J.A,QSpace:ve.A,QBtn:U.A,QSeparator:Y.A,QFile:Ce.A,QIcon:Z.A,QInput:j.A}),M()(Ae,"directives",{ClosePopup:fe.A});var Ie=a(3710);const Le=(0,l.pM)({name:"IndexPage",components:{GrowthChart:v,UserInputForm:ae,ExportDialog:De,ImportDialog:Qe},setup(){const{t:e}=(0,p.s9)(),t=(0,Ie.A)(),a=B(),{availableReferences:r}=(0,K.bP)(a),o=(0,i.KR)({visits:[{}],reference:r.value[0]?.value}),n=(0,l.EW)((()=>o.value.birthdate?new Date(o.value.birthdate):void 0)),s=(e,t)=>{if(!e||!t)return;const a=new Date(e.getTime()),l=new Date(t.getTime());return a.setHours(0,0,0,0),l.setHours(0,0,0,0),(a.getTime()-l.getTime())/315576e5},d=e=>o.value.birthdate?o.value.visits?.filter((e=>!!e.date)).map((t=>({x:s(new Date(t.date),n.value),y:t[e]}))):[],u=e=>o.value.sex?a.getReferenceData(e,o.value.sex):[],c=l=>{a.loadReference(l).catch((()=>t.notify(e("referenceDataLoadFailed"))))};return(0,l.sV)((()=>{const e=localStorage.getItem("userInput");e&&(o.value=JSON.parse(e)),c(o.value.reference)})),{t:e,userInput:o,availableReferences:r,showExportDialog:(0,i.KR)(!1),showImportDialog:(0,i.KR)(!1),splitterModel:(0,i.KR)(57),chartTab:(0,i.KR)("height"),loadReference:c,heightData:(0,l.EW)((()=>d("height"))),weightData:(0,l.EW)((()=>d("weight"))),bmiData:(0,l.EW)((()=>o.value.birthdate?o.value.visits?.filter((e=>e.date&&e.height&&e.weight)).map((e=>({x:s(new Date(e.date),n.value),y:e.weight/(e.height/100)**2}))):[])),heightReferenceData:(0,l.EW)((()=>u("height"))),weightReferenceData:(0,l.EW)((()=>u("weight"))),bmiReferenceData:(0,l.EW)((()=>u("bmi"))),targetHeightSds:(0,l.EW)((()=>{if(o.value.motherHeight&&o.value.fatherHeight)return a.getTargetHeightSds(o.value.fatherHeight,o.value.motherHeight)})),chartColor:(0,l.EW)((()=>"male"==o.value.sex?"#2086e8":"female"==o.value.sex?"#f392a3":"black")),resetUserInput:()=>{o.value={reference:r.value[0]?.value,birthdate:void 0,sex:void 0,visits:[{}]},localStorage.removeItem("userInput")}}}});var Ee=a(3177),He=a(634),We=a(6334),je=a(40),Ue=a(3581),Te=a(4873),Me=a(6721),Ne=a(4082),Oe=a(3815);const Ke=(0,g.A)(Le,[["render",n]]),Xe=Ke;M()(Le,"components",{QPage:Ee.A,QSplitter:He.A,QCard:be.A,QCardSection:J.A,QSeparator:Y.A,QCardActions:We.A,QBtnGroup:je.A,QBtn:U.A,QAvatar:Ue.A,QTabs:Te.A,QTab:Me.A,QTabPanels:Ne.A,QTabPanel:Oe.A})}}]);